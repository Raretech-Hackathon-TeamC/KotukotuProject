{% extends 'base.html' %}

{% block body_class %}
bg-snow text-textBlack font-NotoSans
{% endblock body_class %}

{% block title %}
<title>アクティビティリスト</title>
{% endblock %}

{% comment %} activity_list.js(レコード一覧チャット）に当てはめるためのcss {% endcomment %}
{% block extra_styles %}
<style>
  .chat-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow-y: scroll;
    max-height: calc(7 * (60px + 0.8rem * 2));
    width: calc(100% - 80px);
    padding: 0 80px;
    background-color: #ffffff;
    margin: 0 auto;
  }

  .chat-bubble {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #adc7c2;
    border-radius: 1rem;
    padding: 0.8rem 1rem;
    margin: 0.8rem 0;
    max-width: 90%;
    gap: 10px; /* アイテム間のスペースを調整する */
  }

  .chat-bubble:before {
    content: "";
    position: absolute;
    right: -15px;
    top: 50%;
    transform: translateY(-50%);
    border: 8px solid transparent;
    border-left-color: #adc7c2;
    z-index: 1;
  }

  .chat-image {
    position: absolute;
    right: -40px;
    top: 50%;
    transform: translateY(-50%);
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #fff;
    z-index: 2;
  }

  .trash-icon {
    width: 20px;
    height: 20px;
  }
</style>
{% endblock %}

{% load time_filters %} {# ここでtime_filtersをロード #}

{% load static %}

{% block content %}

 <!-- 左上のホーム＞のやつを作成 -->
 <div class="container mx-auto px-4 pt-20 text-textBlack">
  <nav class="text-lg">
   <a href="{% url 'activity:home' %}" class="hover:underline text-#474747">ホーム</a>
   <span> &gt; </span>
   <span>アクティビティリスト</span>
  </nav>
 </div>

<!-- タイトルの作成 -->
<div class="container mx-auto px-4 pt-4 flex items-center justify-center">
  <h1 class="text-center bg-snow text-xl md:text-3xl text-textBlack" id="setToken">
    アクティビティ一覧
  </h1>
  <svg class="h-6 w-6 md:h-8 md:w-8 ml-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" style="max-width: 100%;" id="mattermost">
    <!-- SVG内容 -->
    <path id="mattermost_path" fill="#000000" stroke="none"
        d="M 250.05,34.00
           C 251.95,34.04 253.85,34.11 255.65,34.20
             255.65,34.20 225.86,69.71 225.86,69.71
             225.79,69.72 225.71,69.74 225.63,69.75
             149.26,84.10 98.22,146.50 98.22,222.97
             98.22,264.53 121.29,313.47 157.97,342.07
             186.58,364.39 222.26,378.97 259.18,378.97
             352.58,378.97 419.33,310.36 419.33,222.97
             419.33,188.06 403.34,150.20 377.57,122.21
             377.57,122.21 375.94,74.82 375.94,74.82
             430.39,113.97 465.89,177.84 466.00,249.99
             466.00,250.00 466.00,250.00 466.00,250.00
             466.00,369.29 369.30,466.00 250.00,466.00
             130.71,466.00 34.00,369.29 34.00,250.00
             34.00,130.71 130.71,34.00 250.00,34.00
             250.00,34.00 250.05,34.00 250.05,34.00 Z
           M 314.15,54.29
           C 314.81,54.25 315.47,54.32 316.11,54.54
             319.12,55.54 319.96,58.11 320.04,60.99
             320.04,60.99 323.88,207.87 323.88,207.87
             324.64,236.53 306.72,276.31 263.49,276.43
             232.52,276.51 199.81,255.60 199.81,216.30
             199.82,201.57 205.42,185.04 219.06,168.19
             219.06,168.19 309.09,57.01 309.09,57.01
             310.24,55.59 312.17,54.43 314.15,54.29
             314.15,54.29 314.15,54.29 314.15,54.29 Z" />
  </svg>
</div>
 <hr class="mx-10 my-4 border-2 border-blackGreen shadow-md" />

 <!-- レコード一覧チャットの中身用のコンテナ -->
 <div id="chat-container" class="chat-container bg-white px-4"></div>

 <!-- モーダルの背景。普段はdisplay:noneでblockにして表示する。 -->
<div id="deleteModal" style="display:none;" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 z-50 flex items-center justify-center">
  <!-- モーダルの背景（見えてる部分） -->
  <div class="bg-white w-11/12 h-1/3 md:max-w-md mx-auto rounded shadow-lg p-6 mt-20 relative">
    <h5 class="text-center mt-4 md:mt-8">積み上げ削除</h5>
    <p class="text-center mt-4 md:mt-8">本当に削除しますか？</p>
    <div class="flex justify-center mt-4 md:mt-8 space-x-4">
      {% comment %} 書くボタンにバックエンドに合わせてidを足した。 {% endcomment %}
      <form class="bg-modalGray text-textBlack px-4 py-2 rounded" method="post" id="deleteForm" style="display:inline;">
        {% csrf_token %}
        <button type="submit" id="deleteBtn" class="px-2 md:px-4 py-1 md:py-2 rounded">削除</button>
      </form>
      <button class="bg-modalGray text-textBlack px-4 py-2 rounded" id="cancelButton">キャンセル</button>
    </div>
  </div>
</div>

 <!-- Mattermost 投稿確認モーダル -->
 <!-- <div id="confirmModal" style="display:none;" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 z-50 flex items-center justify-center"> -->
  <!-- モーダルの背景（見えてる部分） -->
  <!-- <div class="bg-white w-11/12 h-1/3 md:max-w-md mx-auto rounded shadow-lg p-6 mt-20 relative">
    <h5 class="text-center mt-4 md:mt-8">Mattermost</h5>
    <p class="text-center mt-4 md:mt-8">本当に投稿しますか？</p>
    <div class="flex justify-center mt-4 md:mt-8 space-x-4">
      {% comment %} 書くボタンにバックエンドに合わせてidを足した。 {% endcomment %}
      <form class="bg-modalGray text-textBlack px-4 py-2 rounded" method="get" id="confirmForm" style="display:inline;">
        {% csrf_token %}
        <button id="postBtn" class="px-2 md:px-4 py-1 md:py-2 rounded">投稿</button>
      </form>
      <button class="bg-modalGray text-textBlack px-4 py-2 rounded" id="postCancelButton">キャンセル</button>
    </div>
  </div>
</div> -->

 <!-- モーダルの背景。普段はdisplay:noneでblockにして表示する。 -->
 <div id="successModal" style="display:none;" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 z-50 flex items-center justify-center">
  <!-- モーダルの背景（見えてる部分） -->
  <div class="bg-white w-11/12 h-1/3 md:max-w-md mx-auto rounded shadow-lg p-6 mt-20 relative">
    <h5 class="text-center mt-4 md:mt-8">Mattermost</h5>
    <p class="text-center mt-4 md:mt-8">投稿しました！</p>
    <div class="flex justify-center mt-4 md:mt-8">
      <button class="bg-modalGray text-textBlack px-4 py-2 rounded" id="closeSuccessModalButton">閉じる</button>
    </div>
  </div>
</div>

 <!-- モーダルの背景。普段はdisplay:noneでblockにして表示する。 -->
 <div id="failModal" style="display:none;" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 z-50 flex items-center justify-center">
  <!-- モーダルの背景（見えてる部分） -->
  <div class="bg-white w-11/12 h-1/3 md:max-w-md mx-auto rounded shadow-lg p-6 mt-20 relative">
    <h5 class="text-center mt-4 md:mt-8">Mattermost</h5>
    <p class="text-center mt-4 md:mt-8">投稿できませんでした。</br>トークンが間違っていないか確認してください。</p>
    <div class="flex justify-center mt-4 md:mt-8">
      <button class="bg-modalGray text-textBlack px-4 py-2 rounded" id="closeFailModalButton">閉じる</button>
    </div>
  </div>
</div>

<!-- モーダルの背景。普段はdisplay:noneでblockにして表示する。 -->
<div id="tokenModal" style="display:none;" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 z-50 flex items-center justify-center">
  <!-- モーダルの背景（見えてる部分） -->
  <div class="bg-white w-11/12 h-1/3 md:max-w-md mx-auto rounded shadow-lg p-6 mt-20 relative">
    <h5 class="text-center mt-4 md:mt-8">Mattermostのトークンを入力してください</h5>
    <div class="text-center mt-4 md:mt-8">
      <input type="text" id="tokenInput" class="border-2 border-gray-300 p-2 w-full" placeholder="ここにトークンを入力してください" maxlength="50">
      <p id="errorText" class="text-red-500"></p>
    </div>
    <div class="flex justify-center mt-4 md:mt-8 space-x-4">
      <button class="bg-modalGray text-textBlack px-4 py-2 rounded w-32 h-10" id="registerButton">登録</button>
      <button class="bg-modalGray text-textBlack px-4 py-2 rounded w-32 h-10" id="registerCancelButton">キャンセル</button>
    </div>
  </div>
</div>



<script src="{% static 'admin/js/activity_list.js' %}"></script>

{% endblock content%}
